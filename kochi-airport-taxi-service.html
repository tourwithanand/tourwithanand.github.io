<!-- Vehicles (carousel) -->
<section id="vehicles" class="mt-12">
  <div class="text-center mb-6">
    <h2 class="text-3xl md:text-4xl font-black text-gray-900">Our Vehicle Options</h2>
    <p class="text-gray-600 max-w-2xl mx-auto">Choose the right vehicle for your airport transfer — clean, insured and driven by experienced professionals.</p>
  </div>

  <div class="relative max-w-6xl mx-auto">
    <!-- Carousel viewport -->
    <div id="vehicle-carousel" class="overflow-hidden rounded-2xl">
      <div id="vehicle-track" class="flex gap-6 transition-transform will-change-transform"
           style="scroll-snap-type: x mandatory;">
        <!-- Slide 1 -->
        <div class="min-w-[290px] flex-shrink-0 p-4 bg-white rounded-2xl shadow hover:shadow-2xl" style="scroll-snap-align:center;">
          <img src="/images/Maruti Dezire.png" alt="Maruti Dezire (Sedan) - Kochi Airport Taxi" class="w-full h-44 object-cover rounded-lg mb-3">
          <h3 class="font-bold text-lg">Maruti Dezire</h3>
          <p class="text-sm text-gray-600">Comfortable sedan — ideal for 1–3 passengers.</p>
        </div>

        <!-- Slide 2 -->
        <div class="min-w-[290px] flex-shrink-0 p-4 bg-white rounded-2xl shadow hover:shadow-2xl" style="scroll-snap-align:center;">
          <img src="/images/Toyota Etios.png" alt="Toyota Etios - Kochi Airport Taxi" class="w-full h-44 object-cover rounded-lg mb-3">
          <h3 class="font-bold text-lg">Toyota Etios</h3>
          <p class="text-sm text-gray-600">Spacious sedan for comfortable city transfers.</p>
        </div>

        <!-- Slide 3 -->
        <div class="min-w-[290px] flex-shrink-0 p-4 bg-white rounded-2xl shadow hover:shadow-2xl" style="scroll-snap-align:center;">
          <img src="/images/Maruti Ertiga.png" alt="Maruti Ertiga (MPV) - Kochi Airport Taxi" class="w-full h-44 object-cover rounded-lg mb-3">
          <h3 class="font-bold text-lg">Maruti Ertiga</h3>
          <p class="text-sm text-gray-600">Family MPV — seats up to 5 comfortably.</p>
        </div>

        <!-- Slide 4 -->
        <div class="min-w-[290px] flex-shrink-0 p-4 bg-white rounded-2xl shadow hover:shadow-2xl" style="scroll-snap-align:center;">
          <img src="/images/Toyota Crysta.png" alt="Toyota Crysta - Premium Van/SUV" class="w-full h-44 object-cover rounded-lg mb-3">
          <h3 class="font-bold text-lg">Toyota Crysta</h3>
          <p class="text-sm text-gray-600">Premium MPV for groups and extra comfort.</p>
        </div>

        <!-- Slide 5 -->
        <div class="min-w-[290px] flex-shrink-0 p-4 bg-white rounded-2xl shadow hover:shadow-2xl" style="scroll-snap-align:center;">
          <img src="/images/Force Urbania.png" alt="Force Urbania - Large Van" class="w-full h-44 object-cover rounded-lg mb-3">
          <h3 class="font-bold text-lg">Force Urbania</h3>
          <p class="text-sm text-gray-600">Large van for groups with extra luggage space.</p>
        </div>

        <!-- Slide 6 -->
        <div class="min-w-[290px] flex-shrink-0 p-4 bg-white rounded-2xl shadow hover:shadow-2xl" style="scroll-snap-align:center;">
          <img src="/images/Force Tempo Traveller.png" alt="Force Tempo Traveller - Group Transport" class="w-full h-44 object-cover rounded-lg mb-3">
          <h3 class="font-bold text-lg">Tempo Traveller</h3>
          <p class="text-sm text-gray-600">Group transfers — 9 to 20 pax depending on model.</p>
        </div>
      </div>
    </div>

    <!-- Controls -->
    <div class="mt-4 flex items-center justify-between">
      <div>
        <button id="prevBtn" class="bg-white border rounded-full p-3 shadow hover:shadow-md" aria-label="Previous">
          <i class="fas fa-chevron-left"></i>
        </button>
        <button id="nextBtn" class="bg-white border rounded-full p-3 ml-3 shadow hover:shadow-md" aria-label="Next">
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>

      <!-- Dots -->
      <div id="dots" class="flex gap-2"></div>
    </div>
  </div>

  <style>
    /* make track horizontally scrollable for mouse/drag on desktop */
    #vehicle-track {
      overflow-x: auto;
      scroll-behavior: smooth;
      -webkit-overflow-scrolling: touch;
      padding: 12px 6px;
    }
    /* hide native scrollbar */
    #vehicle-track::-webkit-scrollbar { height: 8px; }
    #vehicle-track::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.12); border-radius: 6px; }
    @media(min-width:768px){
      /* show approx 3 slides on medium-up by setting padding and min-width */
      #vehicle-track > div { min-width: 32%; }
    }
    @media(min-width:1200px){
      #vehicle-track > div { min-width: 23%; }
    }
  </style>

  <script>
    (function(){
      const track = document.getElementById('vehicle-track');
      const slides = Array.from(track.children);
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const dotsWrap = document.getElementById('dots');

      // Create dots
      slides.forEach((_, i) => {
        const d = document.createElement('button');
        d.className = 'w-3 h-3 rounded-full bg-gray-300';
        d.setAttribute('aria-label', 'Go to slide ' + (i+1));
        d.dataset.index = i;
        dotsWrap.appendChild(d);
      });
      const dots = Array.from(dotsWrap.children);

      // Helper: center slide index in viewport
      function scrollToIndex(index){
        const slide = slides[index];
        if(!slide) return;
        // Calculate center position
        const trackRect = track.getBoundingClientRect();
        const slideRect = slide.getBoundingClientRect();
        const offset = (slideRect.left + slideRect.right)/2 - (trackRect.left + trackRect.right)/2;
        track.scrollBy({ left: offset, behavior: 'smooth' });
        setActiveDot(index);
      }

      // Active dot
      function setActiveDot(idx){
        dots.forEach(d=>d.classList.remove('bg-blue-900'));
        if(dots[idx]) dots[idx].classList.add('bg-blue-900');
      }

      // Prev / Next handlers: move one slide
      function movePrev(){
        const centerIndex = currentCenterIndex();
        const newIndex = Math.max(0, centerIndex - 1);
        scrollToIndex(newIndex);
      }
      function moveNext(){
        const centerIndex = currentCenterIndex();
        const newIndex = Math.min(slides.length - 1, centerIndex + 1);
        scrollToIndex(newIndex);
      }

      prevBtn.addEventListener('click', movePrev);
      nextBtn.addEventListener('click', moveNext);

      // Dot clicks
      dots.forEach(dot => dot.addEventListener('click', e=>{
        scrollToIndex(Number(e.currentTarget.dataset.index));
      }));

      // Determine which slide is roughly centered in view
      function currentCenterIndex(){
        const trackCenter = track.getBoundingClientRect().left + track.getBoundingClientRect().width/2;
        let bestIndex = 0;
        let bestDiff = Infinity;
        slides.forEach((slide, i) => {
          const r = slide.getBoundingClientRect();
          const slideCenter = r.left + r.width/2;
          const diff = Math.abs(trackCenter - slideCenter);
          if(diff < bestDiff){ bestDiff = diff; bestIndex = i; }
        });
        return bestIndex;
      }

      // Update active dot on scroll (throttled)
      let throttle = false;
      track.addEventListener('scroll', () => {
        if(throttle) return;
        throttle = true;
        setTimeout(() => {
          setActiveDot(currentCenterIndex());
          throttle = false;
        }, 120);
      });

      // initial set
      setActiveDot(0);

      // optional: keyboard arrows
      document.addEventListener('keydown', e => {
        if(e.key === 'ArrowLeft') movePrev();
        if(e.key === 'ArrowRight') moveNext();
      });
    })();
  </script>
</section>
